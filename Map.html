<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Accessible Pujo Map - Navigate the Festive Spirit</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        /* CSS Variables and Reset */
        :root {
            --primary-color: #ad2d09;
            --secondary-color: #ffb65b;
            --accent-color: #ff985b;
            --success-color: #5f1a03;
            --warning-color: #d5663a;
            --info-color: #ff8512;
            --text-light: #ffffff;
            --text-dark: #2c2c2c;
            --bg-light: #f8f9fa;
            --shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, var(--secondary-color) 0%, var(--accent-color) 100%);
            min-height: 100vh;
            color: var(--text-dark);
        }
        /* Language Styles */
        .bengali-text { font-family: 'Kalpurush', 'SolaimanLipi', 'Noto Sans Bengali', sans-serif; display: none; }
        .english-text { display: inline; }
        /* Accessibility Features */
        .high-contrast { filter: contrast(150%) brightness(110%); }
        .large-text { font-size: 1.2em !important; }
        .xl-text { font-size: 1.4em !important; }
        /* Header */
        .header {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--success-color) 100%);
            color: var(--text-light);
            padding: 1.5rem 2rem;
            box-shadow: var(--shadow);
            position: relative;
            overflow: hidden;
        }
        .header::before {
            content: '';
            position: absolute;
            top: 0; right: 0;
            width: 100px; height: 100px;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><text y="50" font-size="60" fill="rgba(255,255,255,0.1)">ü™î</text></svg>');
            opacity: 0.3;
        }
        .header-content { max-width: 1200px; margin: 0 auto; }
        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        .header p { font-size: 1.1rem; opacity: 0.9; margin-bottom: 1.5rem; }
        .header-buttons { display: flex; gap: 1rem; flex-wrap: wrap; }
        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 25px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 1rem;
        }
        .btn-primary { background: var(--secondary-color); color: var(--text-dark); }
        .btn-secondary { background: transparent; color: var(--text-light); border: 2px solid var(--text-light); }
        .btn-emergency {
            background: #dc3545;
            color: var(--text-light);
            animation: pulse 2s infinite;
        }
        .btn:hover { transform: translateY(-2px); box-shadow: var(--shadow); }
        @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } }
        /* Main Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
            display: grid;
            grid-template-columns: 1fr 300px;
            gap: 2rem;
            min-height: calc(100vh - 200px);
        }
        .main-content {
            background: white;
            border-radius: 15px;
            padding: 1.5rem;
            box-shadow: var(--shadow);
        }
        .sidebar { display: flex; flex-direction: column; gap: 1.5rem; }
        /* Search Section */
        .search-section {
            background: white;
            padding: 1.5rem;
            border-radius: 15px;
            box-shadow: var(--shadow);
            margin-bottom: 1.5rem;
        }
        .search-box { position: relative; margin-bottom: 1rem; }
        .search-input {
            width: 100%;
            padding: 1rem 1rem 1rem 3rem;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }
        .search-input:focus { outline: none; border-color: var(--primary-color); }
        .search-icon {
            position: absolute;
            left: 1rem;
            top: 50%;
            transform: translateY(-50%);
            color: #6c757d;
        }
        /* Route Planner */
        .route-planner { display: flex; flex-direction: column; gap: 0.75rem; }
        .route-input {
            padding: 0.75rem;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 0.9rem;
        }
        /* Map Section */
        .map-container {
            position: relative;
            height: 500px;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: var(--shadow);
            margin-bottom: 1.5rem;
        }
        #map { width: 100%; height: 100%; }
        /* Filters */
        .filters {
            background: white;
            padding: 1.5rem;
            border-radius: 15px;
            box-shadow: var(--shadow);
        }
        .filter-group { margin-bottom: 1rem; }
        .filter-title { font-weight: 600; margin-bottom: 0.75rem; color: var(--primary-color); }
        .filter-option {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 5px;
            transition: background-color 0.3s ease;
        }
        .filter-option:hover { background-color: #f8f9fa; }
        .filter-checkbox { width: 18px; height: 18px; accent-color: var(--primary-color); }
        /* Legend */
        .legend {
            background: white;
            padding: 1.5rem;
            border-radius: 15px;
            box-shadow: var(--shadow);
        }
        .legend-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 0.75rem;
            font-size: 0.9rem;
        }
        .legend-icon { font-size: 1.2rem; width: 24px; text-align: center; }
        /* Safety Section */
        .safety-section {
            background: white;
            padding: 1.5rem;
            border-radius: 15px;
            box-shadow: var(--shadow);
        }
        .emergency-numbers { margin-bottom: 1.5rem; }
        .emergency-number {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem;
            background: #f8f9fa;
            border-radius: 8px;
            margin-bottom: 0.5rem;
        }
        .emergency-number .number { font-weight: 600; color: var(--primary-color); }
        /* Accessibility Tools */
        .accessibility-tools {
            background: white;
            padding: 1.5rem;
            border-radius: 15px;
            box-shadow: var(--shadow);
        }
        .tool-buttons { display: flex; flex-wrap: wrap; gap: 0.5rem; margin-bottom: 1rem; }
        .tool-btn {
            padding: 0.5rem 1rem;
            border: 1px solid #e9ecef;
            background: white;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.85rem;
        }
        .tool-btn:hover, .tool-btn.active {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }
        /* Language Selector */
        .language-selector { display: flex; gap: 0.5rem; margin-bottom: 1rem; }
        .lang-btn {
            padding: 0.5rem 1rem;
            border: 2px solid var(--primary-color);
            background: white;
            color: var(--primary-color);
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }
        .lang-btn.active { background: var(--primary-color); color: white; }
        /* Crowd Heatmap Toggle */
        .heatmap-toggle {
            background: white;
            padding: 1rem;
            border-radius: 10px;
            box-shadow: var(--shadow);
            margin-bottom: 1rem;
        }
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 34px;
        }
        .toggle-switch input { opacity: 0; width: 0; height: 0; }
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0; left: 0; right: 0; bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 34px;
        }
        .slider:before {
            position: absolute;
            content: "";
            height: 26px; width: 26px;
            left: 4px; bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        input:checked + .slider { background-color: var(--primary-color); }
        input:checked + .slider:before { transform: translateX(26px); }
        /* Responsive Design */
        @media (max-width: 768px) {
            .container { grid-template-columns: 1fr; padding: 1rem; gap: 1rem; }
            .header { padding: 1rem; }
            .header h1 { font-size: 1.8rem; }
            .header-buttons { justify-content: center; }
            .btn { padding: 0.6rem 1.2rem; font-size: 0.9rem; }
            .map-container { height: 400px; }
        }
        /* Popup Styles */
        .mapboxgl-popup-content {
            border-radius: 10px;
            padding: 1rem;
            max-width: 250px;
        }
        .popup-title { font-weight: 600; color: var(--primary-color); margin-bottom: 0.5rem; }
        .popup-services { display: flex; flex-wrap: wrap; gap: 0.25rem; margin: 0.5rem 0; }
        .service-tag {
            background: var(--secondary-color);
            color: var(--text-dark);
            padding: 0.2rem 0.5rem;
            border-radius: 12px;
            font-size: 0.75rem;
        }
        .popup-contact { font-size: 0.85rem; color: #666; margin-top: 0.5rem; }
    </style>
</head>
<body>
    <!-- Header Section -->
    <header class="header">
        <div class="header-content">
            <h1>
                <span class="english-text">Navigate the Festive Spirit ‚Äî Your Smart Pujo Map</span>
                <span class="bengali-text">‡¶â‡ßé‡¶∏‡¶¨‡ßá‡¶∞ ‡¶Ü‡¶§‡ßç‡¶Æ‡¶æ‡¶Ø‡¶º ‡¶™‡¶• ‡¶ö‡¶≤‡ßÅ‡¶® ‚Äî ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶∏‡ßç‡¶Æ‡¶æ‡¶∞‡ßç‡¶ü ‡¶™‡ßÅ‡¶ú‡ßã ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶™</span>
            </h1>
            <p>
                <span class="english-text">Real-time guidance for safer, smarter pandal hopping.</span>
                <span class="bengali-text">‡¶®‡¶ø‡¶∞‡¶æ‡¶™‡¶¶ ‡¶è‡¶¨‡¶Ç ‡¶∏‡ßç‡¶Æ‡¶æ‡¶∞‡ßç‡¶ü ‡¶™‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶°‡ßá‡¶≤ ‡¶≠‡ßç‡¶∞‡¶Æ‡¶£‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶∞‡¶ø‡¶Ø‡¶º‡ßá‡¶≤-‡¶ü‡¶æ‡¶á‡¶Æ ‡¶ó‡¶æ‡¶á‡¶°‡ßá‡¶®‡ßç‡¶∏‡•§</span>
            </p>
            <div class="header-buttons">
                <button class="btn btn-primary" onclick="searchPandal()">
                    <i class="fas fa-search"></i> 
                    <span class="english-text">Search a Pandal</span>
                    <span class="bengali-text">‡¶™‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶°‡ßá‡¶≤ ‡¶ñ‡ßÅ‡¶Å‡¶ú‡ßÅ‡¶®</span>
                </button>
                <button class="btn btn-secondary" onclick="locateMe()">
                    <i class="fas fa-map-marker-alt"></i> 
                    <span class="english-text">Locate Me</span>
                    <span class="bengali-text">‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶Ö‡¶¨‡¶∏‡ßç‡¶•‡¶æ‡¶®</span>
                </button>
                <button class="btn btn-emergency" onclick="showSOS()">
                    <i class="fas fa-exclamation-triangle"></i> 
                    <span class="english-text">SOS / Help Center</span>
                    <span class="bengali-text">‡¶ú‡¶∞‡ßÅ‡¶∞‡¶ø ‡¶∏‡¶æ‡¶π‡¶æ‡¶Ø‡ßç‡¶Ø ‡¶ï‡ßá‡¶®‡ßç‡¶¶‡ßç‡¶∞</span>
                </button>
            </div>
        </div>
    </header>
    <!-- Main Container -->
    <div class="container">
        <!-- Main Content -->
        <div class="main-content">
            <!-- Search Section -->
            <div class="search-section">
                <h3 style="margin-bottom: 1rem; color: var(--primary-color);">
                    <i class="fas fa-route"></i> 
                    <span class="english-text">Search & Route Planner</span>
                    <span class="bengali-text">‡¶Ö‡¶®‡ßÅ‡¶∏‡¶®‡ßç‡¶ß‡¶æ‡¶® ‡¶ì ‡¶∞‡ßÅ‡¶ü ‡¶™‡¶∞‡¶ø‡¶ï‡¶≤‡ßç‡¶™‡¶®‡¶æ‡¶ï‡¶æ‡¶∞‡ßÄ</span>
                </h3>
                <div class="search-box">
                    <i class="fas fa-search search-icon"></i>
                    <input type="text" class="search-input" id="searchInput">
                </div>
                <div class="route-planner">
                    <input type="text" class="route-input" id="fromLocation">
                    <input type="text" class="route-input" id="toLocation">
                    <button class="btn btn-primary" onclick="planRoute()" style="margin-top: 0.5rem;">
                        <i class="fas fa-directions"></i> 
                        <span class="english-text">Plan Accessible Route</span>
                        <span class="bengali-text">‡¶∏‡ßÅ‡¶¨‡¶ø‡¶ß‡¶æ‡¶ú‡¶®‡¶ï ‡¶∞‡ßÅ‡¶ü ‡¶™‡¶∞‡¶ø‡¶ï‡¶≤‡ßç‡¶™‡¶®‡¶æ</span>
                    </button>
                </div>
            </div>
            <!-- Crowd Heatmap Toggle -->
            <div class="heatmap-toggle">
                <div style="display: flex; align-items: center; justify-content: space-between;">
                    <span>
                        <i class="fas fa-thermometer-half"></i> 
                        <span class="english-text">Live Crowd Heatmap</span>
                        <span class="bengali-text">‡¶≤‡¶æ‡¶á‡¶≠ ‡¶≠‡¶ø‡¶°‡¶º‡ßá‡¶∞ ‡¶Æ‡¶æ‡¶®‡¶ö‡¶ø‡¶§‡ßç‡¶∞</span>
                    </span>
                    <label class="toggle-switch">
                        <input type="checkbox" id="heatmapToggle" onchange="toggleHeatmap()">
                        <span class="slider"></span>
                    </label>
                </div>
                <div style="margin-top: 0.5rem; font-size: 0.85rem; color: #666;">
                    <span style="color: #28a745;">
                        üü¢ <span class="english-text">Low</span><span class="bengali-text">‡¶ï‡¶Æ</span>
                    </span> | 
                    <span style="color: #ffc107;">
                        üü° <span class="english-text">Moderate</span><span class="bengali-text">‡¶Æ‡¶æ‡¶ù‡¶æ‡¶∞‡¶ø</span>
                    </span> | 
                    <span style="color: #dc3545;">
                        üî¥ <span class="english-text">Heavy</span><span class="bengali-text">‡¶¨‡ßá‡¶∂‡¶ø</span>
                    </span>
                </div>
            </div>
            <!-- Interactive Map -->
            <div class="map-container">
                <div id="map"></div>
            </div>
        </div>
        <!-- Sidebar -->
        <div class="sidebar">
            <!-- Language & Accessibility Tools -->
            <div class="accessibility-tools">
                <h4 style="margin-bottom: 1rem; color: var(--primary-color);">
                    <i class="fas fa-universal-access"></i> 
                    <span class="english-text">Accessibility</span>
                    <span class="bengali-text">‡¶∏‡ßÅ‡¶¨‡¶ø‡¶ß‡¶æ</span>
                </h4>
                <div class="language-selector">
                    <button class="lang-btn active" onclick="setLanguage('en')">English</button>
                    <button class="lang-btn" onclick="setLanguage('bn')">‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ</button>
                </div>
                <div class="tool-buttons">
                    <button class="tool-btn" onclick="adjustTextSize('normal')">
                        üÖ∞ <span class="english-text">Normal</span><span class="bengali-text">‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£</span>
                    </button>
                    <button class="tool-btn" onclick="adjustTextSize('large')">
                        üÖ∞ <span class="english-text">Large</span><span class="bengali-text">‡¶¨‡¶°‡¶º</span>
                    </button>
                    <button class="tool-btn" onclick="adjustTextSize('xl')">
                        üÖ∞ <span class="english-text">XL</span><span class="bengali-text">‡¶ñ‡ßÅ‡¶¨ ‡¶¨‡¶°‡¶º</span>
                    </button>
                    <button class="tool-btn" onclick="toggleContrast()">
                        üåì <span class="english-text">Contrast</span><span class="bengali-text">‡¶¨‡ßà‡¶∏‡¶æ‡¶¶‡ßÉ‡¶∂‡ßç‡¶Ø</span>
                    </button>
                    <button class="tool-btn" onclick="enableVoiceNav()">
                        üéß <span class="english-text">Voice Nav</span><span class="bengali-text">‡¶ï‡¶£‡ßç‡¶†‡¶∏‡ßç‡¶¨‡¶∞</span>
                    </button>
                </div>
            </div>
            <!-- Filters -->
            <div class="filters">
                <h4 style="margin-bottom: 1rem; color: var(--primary-color);">
                    <i class="fas fa-filter"></i> 
                    <span class="english-text">Map Filters</span>
                    <span class="bengali-text">‡¶Æ‡ßç‡¶Ø‡¶æ‡¶™ ‡¶´‡¶ø‡¶≤‡ßç‡¶ü‡¶æ‡¶∞</span>
                </h4>
                <div class="filter-group">
                    <label class="filter-option">
                        <input type="checkbox" class="filter-checkbox" id="accessibleOnly" onchange="applyFilters()">
                        <span>
                            <span class="english-text">Show only Accessible Pandals</span>
                            <span class="bengali-text">‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶∏‡ßÅ‡¶¨‡¶ø‡¶ß‡¶æ‡¶ú‡¶®‡¶ï ‡¶™‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶°‡ßá‡¶≤ ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®</span>
                        </span>
                    </label>
                    <label class="filter-option">
                        <input type="checkbox" class="filter-checkbox" id="lowCrowdOnly" onchange="applyFilters()">
                        <span>
                            <span class="english-text">Show Low Crowd Areas</span>
                            <span class="bengali-text">‡¶ï‡¶Æ ‡¶≠‡¶ø‡¶°‡¶º‡ßá‡¶∞ ‡¶è‡¶≤‡¶æ‡¶ï‡¶æ ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®</span>
                        </span>
                    </label>
                    <label class="filter-option">
                        <input type="checkbox" class="filter-checkbox" id="volunteerDesks" onchange="applyFilters()">
                        <span>
                            <span class="english-text">Show Volunteer Help Desks</span>
                            <span class="bengali-text">‡¶∏‡ßç‡¶¨‡ßá‡¶ö‡ßç‡¶õ‡¶æ‡¶∏‡ßá‡¶¨‡¶ï ‡¶∏‡¶æ‡¶π‡¶æ‡¶Ø‡ßç‡¶Ø ‡¶°‡ßá‡¶∏‡ßç‡¶ï</span>
                        </span>
                    </label>
                    <label class="filter-option">
                        <input type="checkbox" class="filter-checkbox" id="facilitiesNearby" onchange="applyFilters()">
                        <span>
                            <span class="english-text">Show Facilities near Me</span>
                            <span class="bengali-text">‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶ï‡¶æ‡¶õ‡ßá‡¶∞ ‡¶∏‡ßÅ‡¶¨‡¶ø‡¶ß‡¶æ ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®</span>
                        </span>
                    </label>
                </div>
            </div>
            <!-- Legend -->
            <div class="legend">
                <h4 style="margin-bottom: 1rem; color: var(--primary-color);">
                    <i class="fas fa-map-signs"></i> 
                    <span class="english-text">Map Legend</span>
                    <span class="bengali-text">‡¶Æ‡ßç‡¶Ø‡¶æ‡¶™ ‡¶ö‡¶ø‡¶π‡ßç‡¶®</span>
                </h4>
                <div class="legend-item">
                    <span class="legend-icon">üèõÔ∏è</span>
                    <span>
                        <span class="english-text">Puja Pandal location</span>
                        <span class="bengali-text">‡¶™‡ßÅ‡¶ú‡ßã ‡¶™‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶°‡ßá‡¶≤‡ßá‡¶∞ ‡¶Ö‡¶¨‡¶∏‡ßç‡¶•‡¶æ‡¶®</span>
                    </span>
                </div>
                <div class="legend-item">
                    <span class="legend-icon">üöª</span>
                    <span>
                        <span class="english-text">Washrooms (Public/Accessible)</span>
                        <span class="bengali-text">‡¶∂‡ßå‡¶ö‡¶æ‡¶ó‡¶æ‡¶∞ (‡¶™‡¶æ‡¶¨‡¶≤‡¶ø‡¶ï/‡¶∏‡ßÅ‡¶¨‡¶ø‡¶ß‡¶æ‡¶ú‡¶®‡¶ï)</span>
                    </span>
                </div>
                <div class="legend-item">
                    <span class="legend-icon">üßë‚Äçü¶Ω</span>
                    <span>
                        <span class="english-text">Wheelchair-accessible path</span>
                        <span class="bengali-text">‡¶π‡ßÅ‡¶á‡¶≤‡¶ö‡ßá‡¶Ø‡¶º‡¶æ‡¶∞ ‡¶∏‡ßÅ‡¶¨‡¶ø‡¶ß‡¶æ‡¶ú‡¶®‡¶ï ‡¶™‡¶•</span>
                    </span>
                </div>
                <div class="legend-item">
                    <span class="legend-icon">ü©∫</span>
                    <span>
                        <span class="english-text">First Aid Booths</span>
                        <span class="bengali-text">‡¶™‡ßç‡¶∞‡¶æ‡¶•‡¶Æ‡¶ø‡¶ï ‡¶ö‡¶ø‡¶ï‡¶ø‡ßé‡¶∏‡¶æ ‡¶¨‡ßÅ‡¶•</span>
                    </span>
                </div>
                <div class="legend-item">
                    <span class="legend-icon">üöì</span>
                    <span>
                        <span class="english-text">Police Help / Security</span>
                        <span class="bengali-text">‡¶™‡ßÅ‡¶≤‡¶ø‡¶∂ ‡¶∏‡¶æ‡¶π‡¶æ‡¶Ø‡ßç‡¶Ø / ‡¶®‡¶ø‡¶∞‡¶æ‡¶™‡¶§‡ßç‡¶§‡¶æ</span>
                    </span>
                </div>
                <div class="legend-item">
                    <span class="legend-icon">üö®</span>
                    <span>
                        <span class="english-text">Emergency Safe Zone</span>
                        <span class="bengali-text">‡¶ú‡¶∞‡ßÅ‡¶∞‡¶ø ‡¶®‡¶ø‡¶∞‡¶æ‡¶™‡¶¶ ‡¶è‡¶≤‡¶æ‡¶ï‡¶æ</span>
                    </span>
                </div>
                <div class="legend-item">
                    <span class="legend-icon">üë©‚Äçü¶∞</span>
                    <span>
                        <span class="english-text">Women's Safety Zone</span>
                        <span class="bengali-text">‡¶Æ‡¶π‡¶ø‡¶≤‡¶æ‡¶¶‡ßá‡¶∞ ‡¶®‡¶ø‡¶∞‡¶æ‡¶™‡¶§‡ßç‡¶§‡¶æ ‡¶è‡¶≤‡¶æ‡¶ï‡¶æ</span>
                    </span>
                </div>
                <div class="legend-item">
                    <span class="legend-icon">üë™</span>
                    <span>
                        <span class="english-text">Family Waiting Zone</span>
                        <span class="bengali-text">‡¶™‡¶æ‡¶∞‡¶ø‡¶¨‡¶æ‡¶∞‡¶ø‡¶ï ‡¶Ö‡¶™‡ßá‡¶ï‡ßç‡¶∑‡¶æ‡¶∞ ‡¶è‡¶≤‡¶æ‡¶ï‡¶æ</span>
                    </span>
                </div>
                <div class="legend-item">
                    <span class="legend-icon">üé¢</span>
                    <span>
                        <span class="english-text">Fairground / Crowd-prone</span>
                        <span class="bengali-text">‡¶Æ‡ßá‡¶≤‡¶æ‡¶∞ ‡¶Æ‡¶æ‡¶† / ‡¶≠‡¶ø‡¶°‡¶º‡¶™‡ßç‡¶∞‡¶¨‡¶£</span>
                    </span>
                </div>
                <div class="legend-item">
                    <span class="legend-icon">üõçÔ∏è</span>
                    <span>
                        <span class="english-text">Food & Stalls</span>
                        <span class="bengali-text">‡¶ñ‡¶æ‡¶¨‡¶æ‡¶∞ ‡¶ì ‡¶¶‡ßã‡¶ï‡¶æ‡¶®</span>
                    </span>
                </div>
            </div>
            <!-- Safety Section -->
            <div class="safety-section">
                <h4 style="margin-bottom: 1rem; color: var(--primary-color);">
                    <i class="fas fa-shield-alt"></i> 
                    <span class="english-text">Safety & Emergency</span>
                    <span class="bengali-text">‡¶®‡¶ø‡¶∞‡¶æ‡¶™‡¶§‡ßç‡¶§‡¶æ ‡¶ì ‡¶ú‡¶∞‡ßÅ‡¶∞‡¶ø</span>
                </h4>
                <div class="emergency-numbers">
                    <div class="emergency-number">
                        <span>
                            <span class="english-text">Police Emergency</span>
                            <span class="bengali-text">‡¶™‡ßÅ‡¶≤‡¶ø‡¶∂ ‡¶ú‡¶∞‡ßÅ‡¶∞‡¶ø</span>
                        </span>
                        <span class="number">100</span>
                    </div>
                    <div class="emergency-number">
                        <span>
                            <span class="english-text">Medical Emergency</span>
                            <span class="bengali-text">‡¶ö‡¶ø‡¶ï‡¶ø‡ßé‡¶∏‡¶æ ‡¶ú‡¶∞‡ßÅ‡¶∞‡¶ø</span>
                        </span>
                        <span class="number">108</span>
                    </div>
                    <div class="emergency-number"></div>
                        <span>
                            <span class="english-text">Women's Helpline</span>
                            <span class="bengali-text">‡¶Æ‡¶π‡¶ø‡¶≤‡¶æ ‡¶π‡ßá‡¶≤‡ßç‡¶™‡¶≤‡¶æ‡¶á‡¶®</span>
                        </span>
                        <span class="number">1091</span>
                    </div>
                    <div class="emergency-number">
                        <span>
                            <span class="english-text">Lost & Found</span>
                            <span class="bengali-text">‡¶π‡¶æ‡¶∞‡¶æ‡¶®‡ßã-‡¶™‡¶æ‡¶ì‡¶Ø‡¶º‡¶æ</span>
                        </span>
                        <span class="number">1073</span>
                    </div>
                </div>
                <div style="display: flex; flex-direction: column; gap: 0.5rem;">
                    <button class="btn btn-primary" onclick="reportIssue()" style="width: 100%;">
                        <i class="fas fa-exclamation-circle"></i> 
                        <span class="english-text">Report an Issue</span>
                        <span class="bengali-text">‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶∞‡¶ø‡¶™‡ßã‡¶∞‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®</span>
                    </button>
                    <button class="btn btn-secondary" onclick="volunteerSignup()" style="width: 100%;">
                        <i class="fas fa-hands-helping"></i> 
                        <span class="english-text">Volunteer Signup</span>
                        <span class="bengali-text">‡¶∏‡ßç‡¶¨‡ßá‡¶ö‡ßç‡¶õ‡¶æ‡¶∏‡ßá‡¶¨‡¶ï ‡¶®‡¶ø‡¶¨‡¶®‡ßç‡¶ß‡¶®</span>
                    </button>
                </div>
            </div>
        </div>
    </div>
    <script>
        // State
        let map;
        let userLocation = null;
        let markers = [];
        let currentLanguage = 'en';
        let heatmapVisible = false;
        // Translations
        const translations = {
            en: {
                searchPlaceholder: "Type to find a puja name or area...",
                fromPlaceholder: "From: Your location",
                toPlaceholder: "To: Selected pandal",
                youAreHere: "You are here!",
                routePlanMessage: "Planning accessible route from \"{from}\" to \"{to}\"."
            },
            bn: {
                searchPlaceholder: "‡¶™‡ßÅ‡¶ú‡ßã‡¶∞ ‡¶®‡¶æ‡¶Æ ‡¶¨‡¶æ ‡¶è‡¶≤‡¶æ‡¶ï‡¶æ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®...",
                fromPlaceholder: "‡¶π‡¶§‡ßá: ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ö‡¶¨‡¶∏‡ßç‡¶•‡¶æ‡¶®",
                toPlaceholder: "‡¶™‡ßç‡¶∞‡¶§‡¶ø: ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶ø‡¶§ ‡¶™‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶°‡ßá‡¶≤",
                youAreHere: "‡¶Ü‡¶™‡¶®‡¶ø ‡¶è‡¶ñ‡¶æ‡¶®‡ßá!",
                routePlanMessage: "\"{from}\" ‡¶•‡ßá‡¶ï‡ßá \"{to}\" ‡¶™‡¶∞‡ßç‡¶Ø‡¶®‡ßç‡¶§ ‡¶∏‡ßÅ‡¶¨‡¶ø‡¶ß‡¶æ‡¶ú‡¶®‡¶ï ‡¶∞‡ßÅ‡¶ü ‡¶™‡¶∞‡¶ø‡¶ï‡¶≤‡ßç‡¶™‡¶®‡¶æ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá‡•§"
            }
        };
        // Language Switch
        function setLanguage(lang) {
            currentLanguage = lang;
            document.querySelectorAll('.english-text').forEach(el => el.style.display = lang === 'en' ? 'inline' : 'none');
            document.querySelectorAll('.bengali-text').forEach(el => el.style.display = lang === 'bn' ? 'inline' : 'none');
            document.getElementById('searchInput').placeholder = translations[lang].searchPlaceholder;
            document.getElementById('fromLocation').placeholder = translations[lang].fromPlaceholder;
            document.getElementById('toLocation').placeholder = translations[lang].toPlaceholder;
            document.querySelectorAll('.lang-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelector('.lang-btn' + (lang === 'en' ? '.active' : ':not(.active)')).classList.add('active');
        }
        // Accessibility
        function adjustTextSize(size) {
            document.body.classList.remove('large-text', 'xl-text');
            document.querySelectorAll('.tool-btn').forEach(btn => btn.classList.remove('active'));
            if (size === 'large') {
                document.body.classList.add('large-text');
                document.querySelectorAll('.tool-btn')[1].classList.add('active');
            } else if (size === 'xl') {
                document.body.classList.add('xl-text');
                document.querySelectorAll('.tool-btn')[2].classList.add('active');
            } else {
                document.querySelectorAll('.tool-btn')[0].classList.add('active');
            }
        }
        function toggleContrast() {
            document.body.classList.toggle('high-contrast');
            document.querySelectorAll('.tool-btn')[3].classList.toggle('active');
        }
        function enableVoiceNav() {
            alert('Voice navigation feature coming soon!');
            document.querySelectorAll('.tool-btn')[4].classList.add('active');
        }
        // Dummy map and filter functions
        function searchPandal() { alert('Search feature coming soon!'); }
        function locateMe() { alert('Locating your position...'); }
        function showSOS() { alert('SOS / Help Center feature coming soon!'); }
        function planRoute() {
            const from = document.getElementById('fromLocation').value || translations[currentLanguage].fromPlaceholder;
            const to = document.getElementById('toLocation').value || translations[currentLanguage].toPlaceholder;
            alert(translations[currentLanguage].routePlanMessage.replace('{from}', from).replace('{to}', to));
        }
        function toggleHeatmap() {
            heatmapVisible = !heatmapVisible;
            alert('Heatmap ' + (heatmapVisible ? 'enabled' : 'disabled') + '!');
        }
        function applyFilters() { alert('Filters applied!'); }
        function reportIssue() { alert('Report Issue feature coming soon!'); }
        function volunteerSignup() { alert('Volunteer Signup feature coming soon!'); }
        // Initial language
        window.onload = function() { setLanguage(currentLanguage); };
    </script>
</body>
</html>
